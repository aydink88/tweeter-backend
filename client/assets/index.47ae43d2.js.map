{"version":3,"file":"index.47ae43d2.js","sources":["../../src/components/Icon/AddUserIcon.tsx","../../src/components/common/Modal.tsx","../../src/components/Profile/FollowList.tsx","../../src/components/Profile/ProfileUserCard.tsx","../../src/components/Profile/index.tsx"],"sourcesContent":["import Icon from '.'\n\nexport default function AddUserIcon(props: any) {\n  return (\n    <Icon {...props}>\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"\n      ></path>\n    </Icon>\n  )\n}\n","import type { MouseEventHandler, ReactNode } from 'react'\n\nexport default function AppModal({\n  children,\n  classNames,\n  label,\n  modalAction,\n  onLabelClick,\n  modalId\n}: {\n  children: ReactNode\n  classNames?: string\n  label: string\n  modalAction?: ReactNode\n  onLabelClick?: MouseEventHandler\n  modalId: string\n}) {\n  return (\n    <>\n      <label\n        htmlFor={modalId}\n        className={`cursor-pointer${classNames ? ' ' + classNames : ''}`}\n        onClick={onLabelClick}\n      >\n        {label}\n      </label>\n      <input type=\"checkbox\" id={modalId} className=\"modal-toggle\" />\n      <div className=\"modal modal-bottom sm:modal-middle\">\n        <div className=\"modal-box\">\n          <label\n            htmlFor={modalId}\n            className=\"absolute top-2 right-2 btn btn-ghost btn-sm btn-circle\"\n          >\n            âœ•\n          </label>\n          {children}\n          <div className=\"modal-action\">{modalAction}</div>\n        </div>\n      </div>\n    </>\n  )\n}\n","import AppModal from 'components/common/Modal'\nimport { defaultAvatar } from 'config'\nimport type { MouseEventHandler } from 'react'\nimport { Link } from 'react-router-dom'\nimport type { TUserProfile } from 'types'\n\nexport default function FollowList({\n  list,\n  username,\n  onLabelClick,\n  listType\n}: {\n  list: TUserProfile[]\n  username: string\n  onLabelClick: MouseEventHandler\n  listType: 'followers' | 'following'\n}) {\n  let cardTitle = ''\n  switch (listType) {\n    case 'followers':\n      cardTitle = `${username} is followed by`\n      break\n    case 'following':\n      cardTitle = `${username} is following`\n      break\n    default:\n      break\n  }\n\n  return (\n    <AppModal modalId={`${listType}-list-modal`} label={listType} onLabelClick={onLabelClick}>\n      <h3 className=\"mb-4 font-semibold custom-title\">{cardTitle}</h3>\n      {list.map((listMember) => (\n        <div key={listMember.id}>\n          <hr />\n          <div className=\"flex items-start my-2\">\n            <div className=\"my-2 follow-list-user\">\n              <div className=\"flex follow-list-info\">\n                <div className=\"p-2 w-16 h-16 avatar follow-list-avatar\">\n                  <img\n                    className=\"mask mask-squircle\"\n                    src={listMember.avatar || defaultAvatar}\n                    alt={listMember.name}\n                  />\n                </div>\n                <div>\n                  <Link to={`/profile/${listMember.handle}`}>\n                    <h2 className=\"font-medium custom-title follow-list-name\">{listMember.name}</h2>\n                  </Link>\n                  <div className=\"text-sm text-base-content/70 follow-list-count\">\n                    {listMember.followerCount} {` ${listType}`}\n                  </div>\n                </div>\n              </div>\n              <div className=\"p-2 text-sm text-base-content/70 follow-list-bio\">\n                {listMember.bio}\n              </div>\n            </div>\n            <div className=\"ml-auto follow-list-button\">\n              <button className=\"btn btn-sm btn-primary\">Follow</button>\n            </div>\n          </div>\n        </div>\n      ))}\n    </AppModal>\n  )\n}\n","import AddUserIcon from 'components/Icon/AddUserIcon'\nimport type { TUserProfile } from 'types'\nimport { defaultAvatar } from 'config'\nimport { fetchFollowersOf, fetchFollowingOf } from 'services/fetch'\nimport { useState } from 'react'\nimport FollowList from './FollowList'\n\nexport default function ProfileUserCard({\n  user,\n  toggleFollow\n}: {\n  user: TUserProfile\n  toggleFollow(): void\n}) {\n  const [followerList, setFollowerList] = useState([] as TUserProfile[])\n  const [followingList, setFollowingList] = useState([] as TUserProfile[])\n\n  const getFollowersOfProfile = () => {\n    fetchFollowersOf(user.id)\n      .then((d) => setFollowerList(d.followers))\n      .catch((e) => console.log(e))\n  }\n\n  const getFollowingOfProfile = () => {\n    fetchFollowingOf(user.id)\n      .then((d) => setFollowingList(d.following))\n      .catch((e) => console.log(e))\n  }\n\n  return (\n    <div className=\"overflow-visible gap-x-4 p-4 -mt-12 w-full bg-base-100 card card-side bordered\">\n      <div className=\"avatar\">\n        <div className=\"-mt-10 w-24 h-24 rounded border bg-base-100\">\n          <img className=\"p-1\" src={defaultAvatar} alt=\"avatar\" />\n        </div>\n      </div>\n      <div className=\"w-full details\">\n        <div className=\"flex justify-between items-center follow\">\n          <div className=\"flex gap-x-4 follow-info\">\n            <h4 className=\"card-title\">{user.name}</h4>\n            <div>\n              <span className=\"font-bold\">{user.followerCount} </span>\n              <FollowList\n                listType=\"followers\"\n                list={followerList}\n                onLabelClick={getFollowersOfProfile}\n                username={user.name}\n              />\n            </div>\n            <div>\n              <span className=\"font-bold\">{user.followingCount} </span>\n              <FollowList\n                listType=\"following\"\n                list={followingList}\n                onLabelClick={getFollowingOfProfile}\n                username={user.name}\n              />\n            </div>\n          </div>\n          <div className=\"follow-button\">\n            <button\n              className={`btn btn-sm ${user.isFollowed ? ' btn-error' : ' btn-primary'}`}\n              onClick={toggleFollow}\n            >\n              <AddUserIcon size={20} />\n              &nbsp;{user.isFollowed ? 'UnFollow' : 'Follow'}\n            </button>\n          </div>\n        </div>\n        <div className=\"bio\">{user.bio}</div>\n      </div>\n    </div>\n  )\n}\n","import Paginate from 'components/common/Paginate'\nimport Timeline from 'components/tweet/Timeline'\nimport TimelineMenu from 'components/tweet/TimelineMenu'\nimport { useQueryProfileOf, useQueryTweetsOf } from 'hooks/fetchQueries'\nimport { useState } from 'react'\nimport { useMutation, useQueryClient } from 'react-query'\nimport { useParams } from 'react-router-dom'\nimport { followProfileOf, unfollowProfileOf } from 'services/fetch'\nimport type { TProfileFeedOption, TTimelineMenu } from 'types'\nimport ProfileUserCard from './ProfileUserCard'\n\nfunction ProfilePage() {\n  const { handle } = useParams<{ handle: string }>()\n  const [tweetsPage, setTweetsPage] = useState(1)\n  // temporary solution to force rerender\n\n  const [feedOption, setFeedOption] = useState<TProfileFeedOption>('tweets')\n  const { data: profileData, isLoading: profileInfoLoading } = useQueryProfileOf(handle)\n  const {\n    data: tweetsData,\n    isLoading: profileFeedLoading,\n    isFetching: isFeedFetching,\n    isPreviousData\n  } = useQueryTweetsOf(\n    handle,\n    feedOption === 'replies',\n    feedOption === 'media',\n    feedOption === 'likes',\n    tweetsPage\n  )\n\n  const feedOptionMenu: TTimelineMenu = [\n    { text: 'Tweets', id: 'tweets' },\n    { text: 'Tweets & Replies', id: 'replies' },\n    { text: 'Media', id: 'media' },\n    { text: 'Likes', id: 'likes' }\n  ]\n\n  const queryClient = useQueryClient()\n\n  const followMutation = useMutation(followProfileOf)\n  const unfollowMutation = useMutation(unfollowProfileOf)\n\n  const toggleFollowRequest = () => {\n    if (!profileData) return\n    const mutation = profileData.profile.isFollowed ? unfollowMutation : followMutation\n    mutation.mutate(profileData.profile.handle, {\n      onSuccess: () => {\n        queryClient.invalidateQueries('fetchProfileOf')\n      }\n    })\n  }\n\n  return (\n    <div className=\"profile\">\n      <div className=\"overflow-hidden h-48 banner-bg\">\n        <img\n          className=\"object-cover object-center w-full h-full\"\n          src=\"https://images.pexels.com/photos/5589173/pexels-photo-5589173.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260\"\n          alt=\"banner\"\n        />\n      </div>\n      {profileData && (\n        <ProfileUserCard user={profileData.profile} toggleFollow={toggleFollowRequest} />\n      )}\n      <div className=\"flex gap-x-12 items-start mt-8\">\n        <div className=\"w-1/4\">\n          <TimelineMenu\n            options={feedOptionMenu}\n            activeOption={feedOption}\n            setActiveOption={setFeedOption}\n          />\n        </div>\n        <div className=\"w-3/4\">\n          <Paginate page={tweetsPage} setPage={setTweetsPage} isPreviousData={isPreviousData}>\n            <Timeline\n              loading={profileInfoLoading || profileFeedLoading || isFeedFetching}\n              tweets={tweetsData?.tweets}\n              withReplies={feedOption === 'replies'}\n              profilePageOf={profileData?.profile.name}\n            />\n          </Paginate>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProfilePage\n"],"names":["AddUserIcon","props","Icon","AppModal","children","classNames","label","modalAction","onLabelClick","modalId","_Fragment","_jsx","FollowList","list","username","listType","cardTitle","map","listMember","_jsxs","avatar","defaultAvatar","name","Link","handle","followerCount","bio","id","ProfileUserCard","user","toggleFollow","followerList","setFollowerList","useState","followingList","setFollowingList","getFollowersOfProfile","fetchFollowersOf","then","d","followers","catch","e","console","log","getFollowingOfProfile","fetchFollowingOf","following","followingCount","isFollowed","ProfilePage","useParams","tweetsPage","setTweetsPage","feedOption","setFeedOption","data","profileData","isLoading","profileInfoLoading","useQueryProfileOf","tweetsData","profileFeedLoading","isFetching","isFeedFetching","isPreviousData","useQueryTweetsOf","feedOptionMenu","text","queryClient","useQueryClient","followMutation","useMutation","followProfileOf","unfollowMutation","unfollowProfileOf","toggleFollowRequest","profile","mutate","onSuccess","invalidateQueries","TimelineMenu","Paginate","Timeline","tweets"],"mappings":"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"}