import{r as u,j as l,a as e,u as A,N as T,L as E,b as C,F as M,R as b,c as m,Q as R,d as j,e as $,H as O,f as H}from"./vendor.9eb6cf8c.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const z="modulepreload",W=function(t){return"/"+t},N={},g=function(n,r,s){if(!r||r.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=W(o),o in N)return;N[o]=!0;const i=o.endsWith(".css"),k=i?'[rel="stylesheet"]':"";if(!!s)for(let p=a.length-1;p>=0;p--){const v=a[p];if(v.href===o&&(!i||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${k}`))return;const h=document.createElement("link");if(h.rel=i?"stylesheet":z,i||(h.as="script",h.crossOrigin=""),h.href=o,document.head.appendChild(h),i)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>n())},B="/assets/avatar.223744d9.jpg",S="tweeter-token";function w(){return localStorage.getItem(S)}function _(t){localStorage.setItem(S,t)}const F="http://localhost:5000/api",c=async(t,n="get",r)=>{let s=null;try{const a=new AbortController;s=setTimeout(()=>a.abort(),8e3);const o=await fetch(F+t,{method:n,headers:{"Content-Type":"application/json",Authorization:`Bearer ${w()}`},body:JSON.stringify(r),signal:a.signal});if(!o.ok)throw new Error("Request failed.");return await o.json()}catch(a){throw console.log(a.message),a}finally{s&&clearTimeout(s)}};function fe(t){return c("/follow/followers/"+t)}function ge(t){return c("/follow/following/"+t)}function ve(t){return c("/follow/"+t,"post")}function we(t){return c("/follow/"+t,"delete")}function ye(t){return c(`/tweet/${t}/retweet`,"post")}function xe(t){return c(`/tweet/${t}/retweet`,"delete")}function ke(t){return c(`/tweet/${t}/favorite`,"post")}function be(t){return c(`/tweet/${t}/favorite`,"delete")}function Ne(t){return c(`/tweet/${t}/save`,"post")}function Le(t){return c(`/tweet/${t}/save`,"delete")}function Ae(t,n){return c(`/comment/${t}`,"post",{text:n.trim()})}function Ee(t){return c(`/comment/${t}/like`,"post")}function Ce(t){return c(`/comment/${t}/like`,"delete")}const P=u.exports.createContext({}),I={misc:{},user:{},error:"",alertMessage:""},U={setUser:(t,n)=>({...t,user:n.payload}),setAppLoading:(t,n)=>({...t,misc:{...t.misc,appLoading:n.payload}}),setError:(t,n)=>({...t,error:n.payload}),setAlert:(t,n)=>({...t,alertMessage:n.payload}),clearError:t=>({...t,error:""}),clearAlert:t=>({...t,alertMessage:""}),resetState:()=>I},q=(t,n)=>U[n.type](t,n),D=({children:t})=>{const[n,r]=u.exports.useReducer(q,I),s=async()=>{if(r({type:"setAppLoading",payload:!0}),!w()){r({type:"setAppLoading",payload:!1});return}try{const a=await c("/user/me");r({type:"setUser",payload:a.user})}catch(a){a!=null&&a.message&&r({type:"setError",payload:a.message})}finally{r({type:"setAppLoading",payload:!1})}};return l(P.Provider,{value:{state:n,dispatch:r,autoLogin:s},children:[t," "]})},f=()=>{const t=u.exports.useContext(P);if(!t)throw new Error("Context should be inside the provider");return t};function V(){const[t,n]=u.exports.useState("login"),[r,s]=u.exports.useState({handle:"",name:"",email:"",password:""}),a=d=>{s({...r,...d})},{dispatch:o}=f(),i=d=>{const h=`/user/${t}`;c(h,"post",d).then(p=>{_(p.user.token),o({type:"setUser",payload:p.user})}).catch(p=>{o({type:"setAlert",payload:p.message})})};return e("div",{className:"m-auto max-w-prose",children:l("form",{autoComplete:"on",className:"space-y-4",onSubmit:d=>{d.preventDefault(),i(r)},children:[t==="register"&&l("div",{className:"form-control",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:"Username"})}),e("input",{value:r.handle,type:"text",placeholder:"username",className:"input input-bordered",onChange:d=>{a({handle:d.target.value})}})]}),t==="register"&&l("div",{className:"form-control",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:"name"})}),e("input",{value:r.name,type:"text",placeholder:"name",className:"input input-bordered",onChange:d=>{a({name:d.target.value})}})]}),l("div",{className:"form-control",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:"Email"})}),e("input",{value:r.email,type:"email",placeholder:"email",className:"input input-bordered",onChange:d=>{a({email:d.target.value})}})]}),l("div",{className:"form-control",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:"Password"})}),e("input",{value:r.password,type:"password",placeholder:"password",className:"input input-bordered",onChange:d=>{a({password:d.target.value})}})]}),t==="login"?l("div",{children:["Don't Have an Account?",e("span",{className:"no-underline link link-primary",onClick:()=>n("register"),children:"Register"})]}):l("div",{children:["Already Have an Account?",e("span",{className:"no-underline link link-primary",onClick:()=>n("login"),children:"Login"})]}),l("div",{className:"flex gap-4 justify-end",children:[e("button",{className:"btn btn-secondary",type:"reset",children:"Clear Fields"}),e("button",{className:"btn btn-primary",type:"submit",children:"Submit"})]})]})})}function L(){var r;const{state:t}=f(),n=A();return u.exports.useEffect(()=>{var s;(s=t.user)!=null&&s.id&&n("/",{replace:!0})},[(r=t.user)==null?void 0:r.id,n]),e(V,{})}function Q(){const{state:t,dispatch:n}=f(),r=()=>{n({type:"clearAlert",payload:void 0})};return t.alertMessage?e("div",{className:"fixed left-0 top-0 z-50 p-4 w-full",children:e("div",{className:"shadow-lg alert alert-error",children:l("div",{children:[e("span",{onClick:r,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"shrink-0 w-6 h-6 stroke-current",fill:"none",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e("span",{children:t.alertMessage})]})})}):null}function x({fullpage:t=!1}){return e("div",{className:`lds-dual-ring${t?" lds-fullpage":""}`})}function J(){return e("div",{className:"grid fixed inset-0 place-items-center",children:l("div",{className:"text-center",children:[e("p",{className:"mb-4 text-xl",children:"Something went wrong"}),e("button",{className:"btn btn-error",onClick:()=>{_(""),window.location.reload()},children:"Reset Everything"})]})})}function G(){return e("nav",{className:"flex space-x-8",children:[{to:"/",text:"Home"},{to:"/explore",text:"Explore"},{to:"/bookmarks",text:"Bookmarks"}].map(n=>e(T,{className:({isActive:r})=>r?"appnavlink applink-active":"appnavlink",to:n.to,children:n.text},n.to))})}function y({size:t=20,iconColor:n="currentColor",children:r}){return e("svg",{height:t,width:t,fill:"none",stroke:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r})}function K(t){return e(y,{...t,children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}function X(t){return e(y,{...t,children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}function Y(t){return l(y,{...t,children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}function Z(t){return e(y,{...t,children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}function ee(){const{dispatch:t}=f(),{state:{user:n}}=f(),r=[{src:Z,alt:"user",text:"My Profile",link:`/profile/${n?n.handle:""}`},{src:K,alt:"group",text:"Group Chat",link:`/profile/${n?n.handle:""}`},{src:Y,alt:"settings",text:"Settings",link:`/profile/${n?n.handle:""}`}],s=30,a=()=>{t({type:"resetState",payload:void 0}),localStorage.clear(),location.assign("/auth")};return l("div",{className:"dropdown dropdown-end",children:[l("div",{tabIndex:0,className:"flex items-center m-1 cursor-pointer",children:[e("img",{src:n.avatar||B,className:"mask mask-squircle",height:s,width:s}),e("span",{children:n.handle}),e("span",{children:"\u25BE"})]}),l("ul",{tabIndex:0,className:"p-2 w-52 shadow menu dropdown-content bg-base-100 rounded-box",children:[r.map(o=>e("li",{className:"flex flex-row justify-center",children:l(E,{to:o.link,children:[e(o.src,{size:s}),e("span",{children:o.text})]})},o.text)),e("li",{className:"flex flex-row justify-center",children:l("div",{onClick:a,children:[e(X,{size:s}),e("span",{children:"logout"})]})})]})]})}const te="/assets/tweeter.9eda862d.svg";function ne(){const t=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"],n=r=>()=>{document.querySelector("html").dataset.theme=r};return l("div",{className:"dropdown dropdown-end",children:[e("div",{tabIndex:0,className:"flex items-center m-1 cursor-pointer",children:e("span",{children:"themes"})}),e("ul",{tabIndex:0,className:"p-2 w-52 shadow menu dropdown-content bg-base-100 rounded-box",children:t.map(r=>e("li",{className:"flex flex-row justify-center",children:e("span",{onClick:n(r),children:r})},r))})]})}function re(){const n=C().pathname.startsWith("/auth");return e("div",{children:!n&&l("header",{className:"flex justify-between items-center px-2 lg:px-16 bg-base-100",children:[e("div",{children:e(E,{to:"/",children:e("img",{src:te,alt:"tweeter"})})}),e("div",{className:"hidden md:block",children:e(G,{})}),l("div",{className:"flex items-center",children:[e(ee,{}),e(ne,{})]})]})})}const ae=u.exports.lazy(()=>g(()=>import("./index.0caea123.js"),["assets/index.0caea123.js","assets/BaseCard.b1daa0dd.js","assets/vendor.9eb6cf8c.js","assets/Timeline.bf477c6f.js","assets/Trends.3ea9ad4a.js"])),oe=u.exports.lazy(()=>g(()=>import("./index.d75f0332.js"),["assets/index.d75f0332.js","assets/TimelineMenu.f8c3923a.js","assets/vendor.9eb6cf8c.js","assets/BaseCard.b1daa0dd.js","assets/Timeline.bf477c6f.js","assets/PageLayout.007c9f66.js"])),se=u.exports.lazy(()=>g(()=>import("./index.89469ff6.js"),["assets/index.89469ff6.js","assets/PageLayout.007c9f66.js","assets/vendor.9eb6cf8c.js","assets/Timeline.bf477c6f.js","assets/TimelineMenu.f8c3923a.js"])),le=u.exports.lazy(()=>g(()=>import("./index.47ae43d2.js"),["assets/index.47ae43d2.js","assets/Timeline.bf477c6f.js","assets/vendor.9eb6cf8c.js","assets/TimelineMenu.f8c3923a.js"])),ie=u.exports.lazy(()=>g(()=>import("./index.82d79c71.js"),["assets/index.82d79c71.js","assets/Timeline.bf477c6f.js","assets/vendor.9eb6cf8c.js","assets/Trends.3ea9ad4a.js","assets/BaseCard.b1daa0dd.js"]));function ce(){var a,o;const{autoLogin:t,state:n}=f(),r=A(),{pathname:s}=C();return u.exports.useEffect(()=>{var i;if(!w()&&!s.startsWith("/auth"))return r("/auth",{replace:!0});!((i=n.user)!=null&&i.id)&&!s.startsWith("/auth")&&t().catch(()=>{r("/auth",{replace:!0})}),w()&&s.startsWith("/auth")&&t().catch(()=>{r("/auth",{replace:!0})}),window.scrollTo({top:0})},[s]),(a=n.misc)!=null&&a.appLoading?e(x,{fullpage:!0}):n.error?e(J,{}):l(M,{children:[e(re,{}),e(Q,{}),e(u.exports.Suspense,{fallback:e(x,{fullpage:!0}),children:e("div",{className:"flex justify-center p-4 mx-auto w-full min-h-screen text-base-content bg-base-300",children:e("div",{className:"w-full xl:w-4/5",children:(o=n.user)!=null&&o.id?l(b,{children:[e(m,{path:"/",element:e(ae,{})}),e(m,{path:"/auth",element:e(L,{})}),e(m,{path:"/explore",element:e(oe,{})}),e(m,{path:"/bookmarks",element:e(se,{})}),e(m,{path:"/profile/:handle",element:e(le,{})}),e(m,{path:"/trend/:id",element:e(ie,{})})]}):l(b,{children:[e(m,{path:"/auth",element:e(L,{})}),e(m,{path:"*",element:e(x,{fullpage:!0})})]})})})})]})}const de=new R({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),ue=()=>l($,{client:de,children:[e(D,{children:e(O,{children:e(ce,{})})}),e(H.exports.ReactQueryDevtools,{initialIsOpen:!1})]}),pe=document.getElementById("root"),he=j(pe);he.render(e(ue,{}));export{y as I,x as S,xe as a,be as b,c,B as d,ke as e,ve as f,Le as g,Ae as h,Ce as i,fe as j,ge as k,Ee as l,we as m,ye as r,Ne as s,f as u};
//# sourceMappingURL=index.9af05460.js.map
